# GOF Criacional - Strategy

## 1. Introdução 

O Strategy é um tipo de GOF estrutural que tem como encapsular uma família de algoritmos e tornar eles intercambiáveis, variando independente dos clientes que forem utilizar eles. <a id="anchor_1" href=#FRM1> [1]</a> (Gamma et al., 1994). Esse padrão é bastante importante no contexto do projeto, pois... Esse padrão é bastante importante no contexto do projeto, pois permite definir diferentes formas de cálculo de recompensas (tokens) para cada tipo de ação sustentável, como reciclagem, transporte ou plantio de árvores sem precisar modificar a lógica principal do sistema. 

## 2. Metodologia


## 3. Strategy implementado no projeto

A seguir, estão as classes responsáveis pela implementação do padrão Strategy, separadas por arquivo e localização no projeto:

### 3.1 token_servico.py

```python
from .token_strategy import (
    ReciclagemStrategy, TransporteStrategy,
    EconomiaRecursosStrategy, DescarteCorretoStrategy,
    PlantioArvoreStrategy
)
import threading

class TokenService:
    """Serviço de gerenciamento de tokens usando padrões Singleton e Strategy."""

    _instance = None
    _lock = threading.Lock()

    def __new__(cls):
        """Implementa padrão Singleton."""
        if cls._instance is None:
            cls._instance = super(TokenService, cls).__new__(cls)
        return cls._instance

    def __init__(self):
        """Inicializa estratégias de cálculo de tokens."""
        if not hasattr(self, "estrategias"):
            self.estrategias = {
                "Reciclagem": ReciclagemStrategy(),
                "Transporte": TransporteStrategy(),
                "EconomiaRecursos": EconomiaRecursosStrategy(),
                "DescarteCorreto": DescarteCorretoStrategy(),
                "PlantioArvore": PlantioArvoreStrategy()
            }
            self.strategies = self.estrategias

    def registrar_tokens(self, usuario, acao):
        """Calcula e atribui tokens ao usuário baseado na ação."""
        estrategia = self.estrategias.get(acao.tipoAcao)

        if not estrategia:
            return 0

        tokens = estrategia.calcular_tokens(acao)
        usuario.saldoTokens += tokens

        return tokens

    def obter_estrategia(self, tipo_acao):
        """Retorna a estratégia de cálculo para um tipo de ação."""
        return self.estrategias.get(tipo_acao)

    def listar_tipos_disponiveis(self):
        """Lista tipos de ações disponíveis."""
        return list(self.estrategias.keys())
```
### 3.2 token_strategy.py

```python
from abc import ABC, abstractmethod


class TokenStrategy(ABC):
    """Classe base para estratégias de cálculo de tokens."""

    @abstractmethod
    def calcular_tokens(self, acao):
        """Calcula tokens para a ação."""
        pass


class ReciclagemStrategy(TokenStrategy):
    """Estratégia para ações de reciclagem."""

    def calcular_tokens(self, acao):
        return 10


class TransporteStrategy(TokenStrategy):
    """Estratégia para transporte sustentável."""

    def calcular_tokens(self, acao):
        return 15


class EconomiaRecursosStrategy(TokenStrategy):
    """Estratégia para economia de recursos."""

    def calcular_tokens(self, acao):
        return 20


class DescarteCorretoStrategy(TokenStrategy):
    """Estratégia para descarte correto."""

    def calcular_tokens(self, acao):
        return 15


class PlantioArvoreStrategy(TokenStrategy):
    """Estratégia para plantio de árvores."""

    def calcular_tokens(self, acao):
        return 25
```
### 3.3 Análise do código


## 4. Teste do Strategy

Para validar a implementação do padrão Strategy, foi realizado um teste que cria um usuário fictício e executa várias ações sustentáveis, conferindo se cada estratégia concreta calcula os tokens esperados.

### 4.1 Gravação do teste

No teste, foi criado o usuário "Maria Silva" que começa com saldo 0, uma lista com tuplas que contém o tipo da ação e quantidade de tokens esperada que foi definida por cada estratégia concreta. Depois disso, cria uma instância de AcaoSustentavel, e depois chama token_service.registrar_tokens(usuario,acao) e escolhe a estratégia com base no tipo da ação. depois é comparado os tokens realmente calculados com os tokens esperados, e se forem iguais quer dizer que o padrão GOF Strategy está funcionando corretamente. Observamos que os valores calculados eram iguais aos valores esperados, confirmando que o Strategy funciona corretamente.

[Teste Strategy](https://youtube.com/embed/RYR31CU8nts)

Link do vídeo pro Youtube: [Teste Singleton](https://youtu.be/RYR31CU8nts)

### 4.2 Resultado do teste

O print abaixo mostra o resultado do teste, evidenciando que diferentes variáveis que receberam TokenService() apontam para o mesmo objeto.

[Print Singleton](../assets/strategy_print.png)

## 5. Diagrama

### 5.1 Diagrama Strategy

A seguir temos o diagrama do GOF Strategy: 

[Diagrama do Singleton](../assets/strategy_diagrama.jpg)


### 5.2 Gravação da produção do Diagrama Strategy

A seguir está disponível a gravação em vídeo que ilustra o processo de discussão e implementação do diagrama:

[Gravação Diagrama Strategy](https://youtube.com/embed/MLlEwYp9hVY)

Link do vídeo pro Youtube: [Gravação Diagrama Strategy](https://youtu.be/MLlEwYp9hVY)



## 6. Participação na Produção do Artefato


## 7. Conclusão



## Referências Bibliográficas

> <a id="FRM1" href="#anchor_1">1.</a>GAMMA, Erich; HELM, Richard; JOHNSON, Ralph; VLISSIDES, John. *Design Patterns: Elements of Reusable Object-Oriented Software*. Boston: Addison-Wesley, 1994.
![livro Design Patterns](https://raw.githubusercontent.com/UnBArqDsw2025-2-Turma02/2025.2_T02_G4_SustentabilidadeJ-_Entrega_03/refs/heads/docs/Singleton/docs/assets/referencias/singleton_ref.png)

## Bibliografia

SERRANO, Milene. Arquitetura e Desenho de Software
AULA - GOFS CRIACIONAIS. UNB, s.d. 
Disponível em: <https://aprender3.unb.br/pluginfile.php/3178542/mod_page/content/1/Arquitetura%20e%20Desenho%20de%20Software%20-%20Aula%20GoFs%20Criacionais%20-%20Profa.%20Milene.pdf>. Acesso em: 23 de outubro de 2025.

SERRANO, Milene. 08d - Video-Aula - DSW - GoFs - Criacionais - Demais - Somente visualização. UNB, s.d. 
Disponível em: <https://unbbr-my.sharepoint.com/personal/mileneserrano_unb_br/_layouts/15/stream.aspx?id=%2Fpersonal%2Fmileneserrano%5Funb%5Fbr%2FDocuments%2FArqDSW%20%2D%20V%C3%ADdeosOriginais%2F08d%20%2D%20Video%2DAula%20%2D%20DSW%20%2D%20GoFs%20%2D%20Criacionais%20%2D%20Demais%2Emp4&ga=1&referrer=StreamWebApp%2EWeb&referrerScenario=AddressBarCopied%2Eview%2E0f7b2e2c%2D0744%2D431e%2D9e62%2D0be8ff5d3836>. Acesso em: 23 de outubro de 2025.

GAMMA, Erich; HELM, Richard; JOHNSON, Ralph; VLISSIDES, John. *Design Patterns: Elements of Reusable Object-Oriented Software*. Boston: Addison-Wesley, 1994.


## Histórico de Versões

| Versão | Descrição                            | Autor(es)                                                                                         | Data       | Revisor(es)                                                                                                 | Data de Revisão |
| ------ | ------------------------------------ | ------------------------------------------------------------------------------------------------- | ---------- | ----------------------------------------------------------------------------------------------------------- | --------- |
| 1.0    | Criação do documento, adicionando diagrama, introdução, código, testes e referências | [Artur Mendonça Arruda](https://github.com/ArtyMend07), [Gabriel Lopes ](https://github.com/BrzGab) e [Lucas Mendonça Arruda](https://github.com/lucasarruda9) | 24/10/2025 |  | |





